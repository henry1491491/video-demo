(function(t){function e(e){for(var a,o,r=e[0],c=e[1],l=e[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={app:0},s=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],o={name:"App"},r=o,c=(n("5c0b"),n("2877")),l=Object(c["a"])(r,i,s,!1,null,null,null),u=l.exports,d=n("8c4f"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"views-the_home"}},[n("div",{staticClass:"container"},[n("the-navbar",{on:{"toggle-modal":t.openModal}}),n("div",{staticClass:"info"},[t._v(" 輸入喜歡的頻道網址（...channel/ 後面）點擊取得即可取得該頻道前 100 部影片。如：UCCKlp1JI9Yg3-cUjKPdD3mw ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.modalShow,expression:"modalShow"}],staticClass:"modal"},[n("div",{staticClass:"modal-content"},[n("router-link",{staticClass:"link",attrs:{tag:"div",to:"/content"}},[n("span",[t._v("首頁")])]),n("router-link",{staticClass:"link",attrs:{tag:"div",to:"/collect"}},[n("span",[t._v("收藏")])])],1)]),n("router-view")],1)])},h=[],m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"views-the_navbar"}},[t._m(0),!1===t.modalShow?n("chevron-down",{staticClass:"menu",on:{click:function(e){return e.preventDefault(),t.toggle(e)}}}):n("chevron-up",{staticClass:"menu",on:{click:function(e){return e.preventDefault(),t.toggle(e)}}}),n("div",{staticClass:"nav-item"},[n("div",{staticClass:"nav-item-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.channelUrl,expression:"channelUrl"}],staticClass:"nav-item-input",attrs:{type:"text",placeholder:"請輸入頻道網址"},domProps:{value:t.channelUrl},on:{input:function(e){e.target.composing||(t.channelUrl=e.target.value)}}}),n("a",{staticClass:"nav-item-button",attrs:{href:"#"},on:{click:t.getChannelsList}},[t._v(" 取得 ")])]),n("router-link",{staticClass:"nav-link1",attrs:{tag:"a",to:"/content"}},[t._v(" 首頁 ")]),n("router-link",{staticClass:"nav-link2",attrs:{tag:"a",to:"/collect"}},[t._v(" 收藏 ")])],1)],1)},f=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nav-title-group"},[n("img",{attrs:{height:"35",src:"https://image.flaticon.com/icons/svg/1051/1051248.svg"}}),n("div",{staticClass:"nav-title"},[t._v(" 精選影片 ")])])}],v={name:"TheNavbar",data:function(){return{channelUrl:"UCCKlp1JI9Yg3-cUjKPdD3mw",modalShow:!1}},methods:{getChannelsList:function(){this.$store.commit("SET_CHANNEL_URL",this.channelUrl),this.router.push("/content")},toggle:function(){!1===this.modalShow?(this.$emit("toggle-modal",{isShow:!1}),this.modalShow=!0):(this.$emit("toggle-modal",{isShow:!0}),this.modalShow=!1)}}},g=v,_=Object(c["a"])(g,m,f,!1,null,null,null),b=_.exports,I={name:"Home",components:{TheNavbar:b},data:function(){return{modalShow:!1,channelUrl:""}},methods:{getChannelsList:function(){this.$store.commit("SET_CHANNEL_URL",this.channelUrl),this.router.push("/content")},openModal:function(t){t.isShow?this.modalShow=!1:this.modalShow=!0}}},T=I,S=Object(c["a"])(T,p,h,!1,null,null,null),C=S.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"views-the_content"}},[n("div",{staticClass:"grid-container"},t._l(t.filterVideosData,(function(e,a){return n("base-video-card",{key:a,staticClass:"grid-item",attrs:{collectList:t.collectList,description:e.snippet.description,duration:e.contentDetails.duration,id:e.id,title:e.snippet.title,thumbnails:e.snippet.thumbnails.medium,channelsListThumbnails:t.channelsListThumbnails},on:{"get-video-player":t.getVideoPlayer,"set-collect-item":t.setCollectItem}})})),1),n("div",{staticClass:"paginate"},[n("paginate",{attrs:{"page-count":t.totalPages,"prev-text":"<","next-text":">","container-class":"pagination","click-handler":t.getPageHandler}})],1)])},L=[],w=(n("fb6a"),{name:"TheContent",data:function(){return{currentPage:1,perPage:12,totalItems:100}},watch:{channelUrl:function(){this.debouncedGetUrl()}},created:function(){this.debouncedGetUrl=this._.debounce(this.initialData,500)},computed:{channelUrl:function(){return this.$store.state.channelUrl},channelsListThumbnails:function(){return this.$store.state.channelsListThumbnails},collectList:function(){return this.$store.state.collectList},filterVideosData:function(){var t=function(t){return 1===t?0:12*(t-1)};return this.videosData.slice(t(this.currentPage),12*this.currentPage)},totalPages:function(){var t=this.totalItems,e=this.perPage;return t%e===0?t/e:Math.ceil(t/e)},videosData:function(){return this.$store.state.videosData}},mounted:function(){this.$store.commit("GET_COLLECT_TITLE_LIST"),this.initialData()},methods:{getPageHandler:function(t){this.currentPage=t},getVideoPlayer:function(t){this.$router.push("/content/".concat(t))},setCollectItem:function(t){this.$store.commit("SET_COLLECT_ITEM",t)},initialData:function(){this.$store.dispatch("initialData")}}}),D=w,E=Object(c["a"])(D,y,L,!1,null,null,null),x=E.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"views-the_videoplayer"}},[n("div",{staticClass:"demo1-video"},[t.videoOptions?n("base-video-player",{attrs:{options:t.videoOptions}}):t._e()],1),t.selectedVideoInfo.length?n("div",{staticClass:"card"},[n("div",{staticClass:"card-title"},[n("span",[t._v(t._s(t.selectedVideoInfo[0].snippet.title))])]),n("div",{staticClass:"card-description",class:{"card-description-more":!0===t.isShowDescription}},[n("div",[t._v(t._s(t.selectedVideoInfo[0].snippet.description))])]),n("div",{staticClass:"card-text"},[t._v(" "+t._s(t.selectedVideoInfo[0].contentDetails.duration)+" ")]),n("a",{attrs:{href:"#"},domProps:{textContent:t._s(!0===t.isShowDescription?"只顯示部份資訊":"顯示完整資訊")},on:{click:function(e){return e.preventDefault(),t.toggleDescription()}}})]):t._e()])},k=[],O=(n("4de4"),{name:"TheContentPlayer",data:function(){return{isShowDescription:!1,videoOptions:{autoplay:!1,controls:!0,sources:[{src:"https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8",type:"application/x-mpegURL"}]},videosData:[]}},computed:{selectedVideoInfo:function(){var t=this;return this.videosData.filter((function(e){return e.id===t.$route.params.id}))}},created:function(){var t=this;this.videosData=JSON.parse(window.sessionStorage.getItem("videosData"))||[];var e=this.videosData.filter((function(e){return e.id===t.$route.params.id}))[0].snippet.thumbnails.high.url;this.$set(this.videoOptions,"poster",e)},methods:{toggleDescription:function(){this.isShowDescription?this.isShowDescription=!1:this.isShowDescription=!0}}}),j=O,U=Object(c["a"])(j,P,k,!1,null,null,null),$=U.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"views-the_collect"}},[n("div",{staticClass:"grid-container"},t._l(t.collectVideosData,(function(e,a){return n("base-video-card",{key:a,staticClass:"grid-item",attrs:{collectList:t.collectList,description:e.snippet.description,duration:e.contentDetails.duration,id:e.id,title:e.snippet.title,thumbnails:e.snippet.thumbnails.medium,channelsListThumbnails:t.channelsListThumbnails},on:{"get-video-player":t.getVideoPlayer,"set-collect-item":t.setCollectItem}})})),1)])},A=[],V=(n("99af"),{name:"TheCollect",data:function(){return{123:2}},computed:{channelsListThumbnails:function(){return this.$store.state.channelsListThumbnails},collectList:function(){return this.$store.state.collectList},collectVideosData:function(){var t=function(t,e){for(var n=[],a=function(a){var i=e.filter((function(e){return e.id===t[a]}));n=n.concat(i)},i=0;i<t.length;i++)a(i);return n};return t(this.collectList,this.videosData)},videosData:function(){return this.$store.state.videosData}},methods:{getVideoPlayer:function(t){this.$router.push("/content/".concat(t))},setCollectItem:function(t){this.$store.commit("SET_COLLECT_ITEM",t)}}}),R=V,M=Object(c["a"])(R,N,A,!1,null,null,null),J=M.exports;a["a"].use(d["a"]);var Y=[{path:"/",component:C,children:[{path:"content",name:"TheContent",component:x},{path:"content/:id",name:"TheContentPlayer",component:$},{path:"collect",name:"TheCollect",component:J}]}],K=new d["a"]({mode:"history",base:"/",routes:Y}),H=K,B=(n("c740"),n("d81d"),n("45fc"),n("a434"),n("d3b7"),n("25f0"),n("96cf"),n("1da1")),G=n("2f62"),z=n("bc3a"),Q=n.n(z);a["a"].use(G["a"]);var Z=new G["a"].Store({state:{channelsListId:"",channelsListThumbnails:{},channelUrl:"",collectList:[],nextPageToken:"",playListItemsId:"",videosData:[]},mutations:{GET_COLLECT_TITLE_LIST:function(t){t.collectList=JSON.parse(localStorage.getItem("collectItem"))||[]},SET_CHANNEL_LIST_THUMBNAILS:function(t,e){t.channelsListThumbnails=e},SET_CHANNEL_URL:function(t,e){t.channelUrl=e},SET_CHANNELS_LIST_ID:function(t,e){t.channelsListId=e},SET_COLLECT_ITEM:function(t,e){var n=this,a=function(){localStorage.setItem("collectItem",JSON.stringify(t.collectList)),n.commit("GET_COLLECT_TITLE_LIST")},i=function(t){return t===e};if(0===t.collectList.length||!1===t.collectList.some(i))t.collectList.push(e),a();else{var s=t.collectList.findIndex(i);t.collectList.splice(s,1),a()}},SET_NEXT_PAGE_TOKEN:function(t,e){t.nextPageToken=e},SET_PLAY_LIST_ITEMS_ID:function(t,e){t.playListItemsId=e},SET_VIDEOS_DATA:function(t,e){t.videosData=e},UPDATE_VIDEOS_DATA:function(t,e){window.sessionStorage.setItem("videosData",JSON.stringify(e)),t.videosData=JSON.parse(window.sessionStorage.getItem("videosData"))||[]}},actions:{initialData:function(t){var e=t.state,n=t.dispatch;return Object(B["a"])(regeneratorRuntime.mark((function t(){var a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n("getChannelsListId");case 2:return a=t.sent,t.next=5,n("getPlaylistItemsIds",{id:a,nextToken:void 0});case 5:return i=t.sent,n("getVideosData",i),t.next=9,n("getPlaylistItemsIds",{id:e.channelsListId,nextToken:e.nextPageToken});case 9:s=t.sent,n("getVideosData",s);case 11:case"end":return t.stop()}}),t)})))()},getChannelsListId:function(t){var e=t.state,n=t.commit;return Object(B["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.channelUrl){t.next=6;break}return t.next=3,Q.a.get("channels?id=UCCKlp1JI9Yg3-cUjKPdD3mw&part=snippet%2CcontentDetails&key=AIzaSyBZDrjSjwQeuYmRj3UKSYIE0ugNmIJds2g");case 3:a=t.sent,t.next=9;break;case 6:return t.next=8,Q.a.get("channels?id=".concat(e.channelUrl,"&part=snippet%2CcontentDetails&key=AIzaSyBZDrjSjwQeuYmRj3UKSYIE0ugNmIJds2g"));case 8:a=t.sent;case 9:if(200===a.status){t.next=11;break}return t.abrupt("return");case 11:return n("SET_CHANNEL_LIST_THUMBNAILS",a.data.items[0].snippet.thumbnails),n("SET_CHANNELS_LIST_ID",a.data.items[0].contentDetails.relatedPlaylists.uploads),t.abrupt("return",e.channelsListId);case 14:case"end":return t.stop()}}),t)})))()},getPlaylistItemsIds:function(t,e){var n=t.state,a=t.commit,i=e.id,s=e.nextToken;return Object(B["a"])(regeneratorRuntime.mark((function t(){var e,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=50,o=void 0===s?"playlistItems?part=snippet%2CcontentDetails&maxResults=".concat(e,"&playlistId=").concat(i,"&key=AIzaSyBZDrjSjwQeuYmRj3UKSYIE0ugNmIJds2g"):"playlistItems?part=snippet%2CcontentDetails&maxResults=".concat(e,"&playlistId=").concat(i,"&pageToken=").concat(s,"&key=AIzaSyBZDrjSjwQeuYmRj3UKSYIE0ugNmIJds2g"),t.next=4,Q.a.get(o);case 4:if(r=t.sent,200===r.status){t.next=7;break}return t.abrupt("return");case 7:if(void 0===s&&a("SET_NEXT_PAGE_TOKEN",r.data.nextPageToken),a("SET_PLAY_LIST_ITEMS_ID",r.data.items.map((function(t){return t.contentDetails.videoId})).toString()),void 0!==s){t.next=13;break}return t.abrupt("return",{id:n.playListItemsId,getToken:!1});case 13:return t.abrupt("return",{id:n.playListItemsId,getToken:!0});case 14:case"end":return t.stop()}}),t)})))()},getVideosData:function(t,e){var n=t.state,a=t.commit,i=e.id,s=e.getToken;return Object(B["a"])(regeneratorRuntime.mark((function t(){var e,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="videos?part=snippet%2CcontentDetails&id=".concat(i,"&key=AIzaSyBZDrjSjwQeuYmRj3UKSYIE0ugNmIJds2g"),t.next=3,Q.a.get(e);case 3:if(o=t.sent,200===o.status){t.next=6;break}return t.abrupt("return");case 6:!1===s?a("SET_VIDEOS_DATA",o.data.items):a("UPDATE_VIDEOS_DATA",n.videosData.concat(o.data.items));case 7:case"end":return t.stop()}}),t)})))()}},modules:{}}),X=n("f0e2");n("fda2");a["a"].prototype.$video=X["a"];var q=n("a7fe"),F=n.n(q);a["a"].use(F.a,Q.a),Q.a.defaults.baseURL="https://www.googleapis.com/youtube/v3",Q.a.defaults.withCredentials=!0;var W=n("8832"),tt=n.n(W);a["a"].component("Paginate",tt.a);n("d48d");var et=n("e26e"),nt=n("554d"),at=n("3d10"),it=n("7a20");a["a"].component("chevron-down",et["a"]),a["a"].component("chevron-up",nt["a"]),a["a"].component("star",at["a"]),a["a"].component("star-outline",it["a"]);var st=n("9955"),ot=n.n(st),rt=n("2ef0"),ct=n.n(rt);a["a"].use(ot.a,{lodash:ct.a});var lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"components-base_videocard"}},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[n("a",{attrs:{href:"#"},on:{click:function(e){return t.getVideoPlayer(t.id)}}},[n("img",{attrs:{src:t.thumbnails.url,width:t.thumbnails.width,height:t.thumbnails.height}}),-1!==t.collectList.indexOf(t.id)?n("a",{attrs:{href:"#"},on:{click:function(e){return e.stopPropagation(),t.setCollectItem(t.id)}}},[n("star")],1):n("a",{attrs:{href:"#"},on:{click:function(e){return e.stopPropagation(),t.setCollectItem(t.id)}}},[n("star-outline")],1)])]),n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-avatar"},[n("img",{attrs:{src:t.channelsListThumbnails.default.url,width:"30px",height:"30px"}})]),n("div",{staticClass:"card-content"},[n("p",{staticClass:"card-title"},[t._v(" "+t._s(t.title)+" ")]),n("p",{staticClass:"card-description"},[t._v(" "+t._s(t.description)+" ")]),n("p",{staticClass:"card-text"},[t._v(" 影片長度："+t._s(t.duration)+" ")])])])])])},ut=[],dt={name:"BaseVideoCard",props:{channelsListThumbnails:{type:Object},collectList:{type:Array},description:{type:String},duration:{type:String},thumbnails:{type:Object},title:{type:String},id:{type:String}},methods:{getVideoPlayer:function(t){this.$emit("get-video-player",t)},setCollectItem:function(t){this.$emit("set-collect-item",t)}}},pt=dt,ht=Object(c["a"])(pt,lt,ut,!1,null,null,null),mt=ht.exports,ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("video",{ref:"videoPlayer",staticClass:"video-js vjs-big-play-centered vjs-fluid"},[n("source",{attrs:{src:"https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8",type:"application/x-mpegURL"}})])])},vt=[],gt={name:"BaseVideoPlayer",props:{options:{type:Object,default:function(){return{}}}},data:function(){return{player:null}},mounted:function(){this.player=this.$video(this.$refs.videoPlayer,this.options,(function(){console.log("onPlayerReady",this)}))},beforeDestroy:function(){this.player&&this.player.dispose()}},_t=gt,bt=Object(c["a"])(_t,ft,vt,!1,null,null,null),It=bt.exports;a["a"].component("BaseVideoCard",mt),a["a"].component("BaseVideoPlayer",It);n("a0d8");a["a"].config.productionTip=!1,new a["a"]({router:H,store:Z,render:function(t){return t(u)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var a=n("9c0c"),i=n.n(a);i.a},"9c0c":function(t,e,n){},a0d8:function(t,e,n){}});
//# sourceMappingURL=app.13a8dd4e.js.map